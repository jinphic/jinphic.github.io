盘古低代码复盘
收益维度
运营数据
1.接入的团队（总量和新增）
2.创建的应用数量（总量和新增）
3.创建的页面数量 （总量和新增）
效率数据
1.应用配置平均耗时
2.页面配置平均耗时
3.单应用接口开发数量
4.单应用开发周期 7天 -  1天
5.单应用人力成本 5人天 - 1人天
6.联动、校验编写难度降低， AI辅助
7.工单数量、客服号答疑
8.发布速度
9.微前端


安全
配置安全性
1.配置事故率
2.配置错误的可追溯性，日志、操作记录
3.权限控制，应用级别的控制，页面级别的控制，同一页面内弹窗级别的控制
4.crush优化，页面出现错误的情况避免配置数据丢失。重载页面后能进行配置数据回填
逻辑安全性
1.组件版本控制
2.页面版本控制
3.页面回滚
4.外网接口在非正式环境的拦截
5.发布环境控制
6.发布速度
7.按需加载
8.接口请求避免出现 “413 payload too large"

技术选型
1.技术栈适配性： react、formily
2.是否开源
3.代码的完成度 和 质量
4.社区的生态，star 数量、discussion 、issue 回复速度
5.团队积累
6.接入难度
7.扩展性

扩展点
1.稳定性， clone一份维护，保持和向上兼容，外部资源替换
2.跟进issue更新
3.易用性改造，文档整理，素材的生成和消费路径缩减，指定准入规范
4.新特性：插件式
5.将这种可视化编排生成schema的编辑器的，抽象成可直接使用的

交互设计
1.增强引导与提示
2.简化/省略不必要的步骤，增加默认值
3.保持配置流程连续性，避免来回跳
4.其他交互细节优化
5.文档同步更新
6.接入ChatGPT，智能创建管理系统

HEART模型
happiness：满意度
engagement：参与度
adoption：接受度
retention：留存率
Task success：任务完成率

素材的开发、构建和消费串联了整个平台
素材开发
1.本地开发、热更新
2.本地预览
3.二次开发创建素材库
4.本地轻量版本的playground

官方素材库设计 lerna+monorepo
1.分类：基础组件，体积不大并且改动不频繁
复杂组件，体积可大可小，改动频繁 或者是 业务类型组件需要独立的版本控制
2.构建配置：公用配置 和  extend
3.版本控制
4.正式版本发布控制在master
5.esm产物和umd产物
6.脚手架创建
7.本地轻量的playground 通过alias去引用对应包的东西，这样能实现修改组件里面实现热更新，同时打出cjs产物用于类型提醒

构建
1.script module ： 基于umi的项目，顶层await 改造量大
2.npm包：参与构建，无环境区分、难按需加载、安装依赖耗时和版本控制难以解决， 重复安装依赖
3.git submodule: 仓库耦合、无法二次开发、管理和更新过于复杂
4.umd：传递性、依赖顺序、组件体积偏大

构建依赖分析
umd具有传递性，一个包用umd产物，那么它本身external的那些依赖都必须是umd的
某些重复使用的UI组件库和依赖库，需要单独构建到一个umd bundle中，避免package的构建重复打包
依赖的顺序控制

步骤
1.tsc 生成esm和cjs的产物用来发npm包在其他地方使用，也可以用作类型声明
2.rollup 根据情况区分，是整个package一个umd产物，还是package中每个组件一个umd产物，这种情况先构建了无版本号的umd资源
3.读取lerna配置的version，通过copy命令复制umd产物，文件名称带上版本号
4.build maifest, 生成每个umd产物的资源索引文件，比如组件A它的js外链、css外链列表。


二次开发
1.初始化脚手架
2.使用脚手架创建组件
3.推送代码出发CI生成UMD资源文件
4.二次开发的仓库绑定到低代码平台，低代码平台通过正则将git地址转成唯一标识前缀。
5.拉二次开发资源的时候，可以通过拼接git标志和文件，拉取到二次开发的代码资源

素材的消费-配置平台
1.通过脚本操作html模板，每次CI动态生成
2.读取manifest文件，动态生成script外链，按预定顺序，插入html模板的插槽中
3.使用的不带版本号的umd资源，确保每次都是最新的

素材的消费-产物平台
1.产物的渲染完全依赖于fomily-render，通过接口拉取配置平台保存的schema， 使用Formily/SchemaField渲染。 
2.产物采用的是运行时渲染，而不是出码渲染。 SchemaField本身就是一个渲染器
3.产物平台项目代码，只是一个空壳的layout，核心渲染部分完全是在配置平台配置的部分，这部分由SchemaFild 和 保存的schema渲染。
需要做的按需引入用到的组件的umd。
4.在配置平台保存的时候a. 保存/发布
b. 获取需要发布的机器的ipc. 通知其他机器一起执行发布d. 判断是否需要重新构建		- 素材版本是否变了		- 产物平台的md5是否变了e. 不需要重新构建，更新html版本号即可。 index_version.html 和 index.html
f. 需要重新构建，在空壳html 中，按需插入引用到的组件的最新的带版本号的外链g. 更新html版本号，并且覆盖当前html
5.产物的环境区分： 资源外链都是通过node插入的，引入对应环境的资源链接
6.资源复用，按需加载：资源外链都是通过node按需插入的
7.发布速度达到3-5秒：只需要node动态插入组件外链资源，不需要重新构建项目
8.项目隔离：每个项目一个html，发布和回滚，都可以通过保存的html版本号，找到对应的html文件。
9.项目稳定性保证

监控
1.页面错误告警
2.素材体积看板
3.素材-页面关联看板：每个页面用到了哪些组件，每个组件在哪些页面用到了


Easyform
抽象成一个可直接调用的组件，提供给其他平台使用
有一些平台需要 “配置一个底板， 在其他地方复用此底板生成表单，然后产品再在新的表单上填写数据”。
生成底板和渲染表单的能力可以提供给其他项目使用


